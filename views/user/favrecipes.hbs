  <div class="container mt-5">
    <h1>Your Favorite Recipes</h1>

    {{#if favRecipes.length}}
      <ul class="list-unstyled recipe-list">
        {{#each favRecipes}}
          <li class="recipe-card">
            <a href="/recipes/{{this._id}}/details" class="card-link">
              <div class="card">
                <div class="card-body">
                  <h2 class="card-title">{{this.title}}</h2>
                  <form action="/user/addOrRemoveFavRecipes/{{this._id}}" method="POST" class="d-inline">
                    <button type="submit" class="btn btn-outline-danger">&#10084;</button>
                  </form>
                </div>
                <img src="{{this.img}}" width="400px" alt="{{this.title}} Image" class="card-img-top">
              </div>
            </a>
          </li>
        {{/each}}
      </ul>
    {{else}}
      <p>You haven't added any recipes to your favorites yet.</p>
    {{/if}}

    <a href="/recipes" class="btn btn-link">Back to All Recipes</a>
  </div>

<script>
  const favoriteForms = document.querySelectorAll(".favorite-form");

  favoriteForms.forEach(form => {
    form.addEventListener("submit", async event => {
      event.preventDefault();

      const recipeId = form.getAttribute("data-recipe-id");

      try {
        const response = await fetch(`/recipes/addOrRemoveFavoriteRecipe/${recipeId}`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ recipeId })
        });

        if (response.ok) {

        } else {
          console.error("Error adding/removing favorite recipe");
        }
      } catch (error) {
        console.error("Fetch error:", error);
      }
    });
});
</script>




