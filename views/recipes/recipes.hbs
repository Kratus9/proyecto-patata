<h1>Check Recipes</h1>
<ul class="recipe-list">
  {{#each recipes}}
    <li class="recipe-card">
      <a href="/recipes/{{this._id}}/details" class="card-link">
        <div class="card-content">
          <img width="400px" src="{{this.img}}" alt="{{this.title}} Image">
          <h2>
            {{this.title}}
            <form class="favorite-form" data-recipe-id="{{this._id}}">
              <button>&#10084;</button>
            </form>
          </h2>
        </div>
      </a>
    </li>
  {{/each}}
</ul>

<script>
  const favoriteForms = document.querySelectorAll(".favorite-form");

  favoriteForms.forEach(form => {
    form.addEventListener("submit", async event => {
      event.preventDefault();

      const recipeId = form.getAttribute("data-recipe-id");

      try {
        const response = await fetch(`/recipes/addOrRemoveFavoriteRecipe/${recipeId}`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ recipeId })
        });

        if (response.ok) {

        } else {
          console.error("Error adding/removing favorite recipe");
        }
      } catch (error) {
        console.error("Fetch error:", error);
      }
    });
  });
</script>






